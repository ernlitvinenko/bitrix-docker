# Установка 1C-bitrix через DOCKER

## 1. Предварительные требования

- Установленный Docker: Инструкция по установке Docker
- Установленный Docker Compose: Инструкция по установке Docker Compose

## 2. Установка

1. Склонируйте проект из github
    ```bash
    git clone https://github.com/ernlitvinenko/bitrix-docker
    ```
2. Соберите образ и запустите в фоновом режиме
    ```bash
    docker compose build && docker compose up -d
    ```
3. После этого перейдите по [ссылке](http://localhost:8000/bitrixsetup.php) и продолжите установку

## 3. Подключение Базы данных
> База данных может быть развернута как на хостинге, так и на локальном компьютере. Но стоит понимать, что подключение к БД расположенной на хостовой машине из докер контейнера не рекомендуется.

### 1. Подключение к БД расположенной на хостинге.
Для этого пункта, необходимо узнать у вашего хостинг провайдера данные для подключения и внести их непосредственно в поля для настройки БД.

![database parameters](/docs/images/image.png)

### 2. Развертка и подключение к БД в Docker-контейнере.
Файл `docker-compose.yml` позволяет управлять различнрыми контейнерами внутри однго проекта. Для добавления MySQL в конфигурацию docker-compose.yml, нужно раскоментировать сервис mysql.

```yaml
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root_password      # Пароль ROOT пользователя
      MYSQL_DATABASE: bitrix_db               # Имя базы данных
      MYSQL_USER: bitrix_user                 # Имя пользователя
      MYSQL_PASSWORD: bitrix_password         # Пароль 
    volumes:
      - mysql_data:/var/lib/mysql
volumes:
  mysql_data:
```

> #### Обязательно меняйте пароли в конфигурациях!!!
В параметрах базы данных в поле `Сервер` необходимо указывать `mysql` (т.е. имя сервиса) 



## Заключение

Теперь ваш сайт на Bitrix работает через Docker и Nginx. Вы можете использовать данную структуру для разработки и развертывания приложения.